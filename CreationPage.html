<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>SENSE Web App</title>
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />
    <script src="./js/showToast.js" defer></script>
    <script src="./js/authGuard.js" defer></script>
    <script src="../node_modules/flowbite/dist/flowbite.min.js"></script>
    <link href="./css/output.css" rel="stylesheet" />
    <link
      rel="shortcut icon"
      href="../public/assets/images/sense-logo.png"
      type="image/x-icon"
    />
  </head>
  <body class="bg-gray-100 font-inter">
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
          "tween": "https://unpkg.com/@tweenjs/tween.js@23.1.1/dist/tween.esm.js"
        }
      }
    </script>

    <div class="relative h-screen w-screen overflow-hidden">
      <div id="Canvas-container" class="absolute inset-0 bg-white"></div>
      <div
        id="view-controls"
        class="absolute top-4 right-80 mr-4 z-10 flex flex-wrap gap-2 p-1.5 bg-white/80 backdrop-blur-sm rounded-sm shadow-sm border border-gray-200"
      >
        <button
          id="btn-deselect"
          class="px-2 py-1 text-sm font-base text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Deselect Object (Escape)"
        >
          <img
            src="../public/assets/images/mouse-pointer-click.png"
            id="deselect-bg"
            alt="deselect"
            class="w-5 h-5"
          />
        </button>
        <button
          id="btn-transform"
          class="px-2 py-1 text-sm font-base text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Translate (R)"
        >
          <img
            src="../public/assets/images/Translate.png"
            id="transform-bg"
            alt="transform"
            class="w-5 h-5"
          />
        </button>
        <button
          id="btn-rotate"
          class="px-2 py-1 text-sm font-base text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Rotate (R)"
        >
          <img
            src="../public/assets/images/rotate.png"
            id="rotate-bg"
            alt="rotate"
            class="w-5 h-5"
          />
        </button>
        <button
          id="btn-scale"
          class="px-2 py-1 text-sm font-base text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Scale (R)"
        >
          <img
            src="../public/assets/images/scale.png"
            id="scale-bg"
            alt="scale"
            class="w-5 h-5"
          />
        </button>
        <!-- Scene Tools -->
        <button
          id="btn-light-bg"
          class="px-2 py-1 text-sm font-base text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Light Background"
        >
          <img
            src="../public/assets/images/Lightbgbtn.png"
            id="light-bg"
            alt="light"
            class="w-5 h-5"
          />
        </button>
        <button
          id="btn-dark-bg"
          class="px-2 py-1 text-sm font-base text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Dark Background"
        >
          <img
            src="../public/assets/images/Darkbgbtn.png"
            id="dark-bg"
            alt="dark"
            class="w-5 h-5"
          />
        </button>
        <!-- View Tools -->
        <button
          id="btn-view-top"
          class="px-2 py-1 text-sm font-base text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Top View"
        >
          Top
        </button>
        <button
          id="btn-view-front"
          class="px-2 py-1 text-sm font-base text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Front View"
        >
          Front
        </button>
        <button
          id="btn-view-left"
          class="px-2 py-1 text-sm font-base text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Left View"
        >
          Left
        </button>
        <button
          id="btn-view-perspective"
          class="px-2 py-1 text-sm font-semibold text-blue-600 bg-blue-100 hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Perspective View"
        >
          3D
        </button>
      </div>

      <!-- Left Sidebar -->
      <aside
        id="leftSidebar"
        class="absolute top-0 left-0 h-full z-10 w-60 bg-white p-3 flex flex-col shrink-0 border-r border-gray-200 overflow-y-auto transition-all duration-300"
      >
        <div
          id="sidebarHeader"
          class="flex items-center justify-between border-gray-200"
        >
          <img
            id="sidebarLogo"
            src="../public/assets/images/brand-logo.png"
            class="w-8"
            alt=""
          />
          <button id="sidebarToggleBtn" class="hover:text-gray-800">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="currentColor"
              class="size-7 text-ink/90"
            >
              <path
                d="M440-280v-400L240-480l200 200Zm80 160h80v-720h-80v720Z"
              />
            </svg>
          </button>
        </div>
        <div class="sidebar-content border-b text-ink border-gray-200 py-5">
          <label for="projectTitle" class="mb-2 block">Project Title</label>
          <input
            type="text"
            id="projectTitle"
            value="untitiled_sense_project.glb"
            class="w-full px-3 py-2 text-sm focus:outline-0 border-0 focus:ring-0 text-ink/80 bg-gray-100 mb-4 focus:outline-none"
          />
          <button
            id="saveCloudBtn"
            class="w-full text-sm bg-blue-500 hover:bg-blue-600 duration-200 font-medium text-white py-1.5 flex items-center justify-center gap-2"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="#fafafa"
              class="size-5"
            >
              <path
                d="M800-663.08v438.46q0 27.62-18.5 46.12Q763-160 735.38-160H224.62q-27.62 0-46.12-18.5Q160-197 160-224.62v-510.76q0-27.62 18.5-46.12Q197-800 224.62-800h438.46L800-663.08ZM479.82-298.46q33.26 0 56.72-23.28T560-378.28q0-33.26-23.28-56.72t-56.54-23.46q-33.26 0-56.72 23.28T400-378.64q0 33.26 23.28 56.72t56.54 23.46ZM270.77-569.23h296.92v-120H270.77v120Z"
              />
            </svg>
            Save
          </button>
        </div>
        <div class="sidebar-content border-b border-gray-200 py-5">
          <h2 class="mb-2">Dimensions</h2>
          <div class="mb-4 border-b border-gray-200 dark:border-gray-700">
            <ul
              class="flex flex-wrap -mb-px text-sm text-center"
              id="default-tab"
              data-tabs-toggle="#default-tab-content"
              role="tablist"
            >
              <li class="me-2" role="presentation">
                <button
                  class="inline-block px-2 py-2 text-sm font-normal border-b-2 rounded-t-lg"
                  id="meter-tab"
                  data-tabs-target="#meter"
                  type="button"
                  role="tab"
                  aria-controls="meter"
                  aria-selected="true"
                >
                  Meter
                </button>
              </li>
              <li class="me-2" role="presentation">
                <button
                  class="inline-block px-2 py-2 text-sm font-normal border-b-2 rounded-t-lg hover:text-ink/80 hover:border-gray-300 dark:hover:text-gray-300"
                  id="feet-tab"
                  data-tabs-target="#feet"
                  type="button"
                  role="tab"
                  aria-controls="feet"
                  aria-selected="false"
                >
                  Feet
                </button>
              </li>
            </ul>
          </div>
          <div id="default-tab-content">
            <div
              class="p-0 rounded-lg"
              id="meter"
              role="tabpanel"
              aria-labelledby="meter-tab"
            >
              <div class="space-y-2">
                <div class="flex justify-between text-sm items-center">
                  <label for="GetFloorLengthMeters" class="text-sm mb-2 block"
                    >Length</label
                  >
                  <div class="flex items-center bg-gray-100">
                    <input
                      type="number"
                      id="GetFloorLengthMeters"
                      value="5"
                      class="flex-grow border-0 text-sm bg-gray-100 focus:ring-0 focus:outline-none w-20"
                    />
                    <span class="pe-3">m</span>
                  </div>
                </div>
                <div class="flex justify-between text-sm items-center">
                  <label for="GetFloorWidthMeters" class="text-sm mb-2 block"
                    >Width</label
                  >
                  <div class="flex items-center bg-gray-100">
                    <input
                      type="number"
                      id="GetFloorWidthMeters"
                      value="5"
                      class="flex-grow border-0 text-sm bg-gray-100 focus:ring-0 focus:outline-none w-20"
                    />
                    <span class="pe-3">m</span>
                  </div>
                </div>
                <div class="flex justify-between text-sm items-center">
                  <label for="GetWallHeightMeters" class="text-sm mb-2 block"
                    >Height</label
                  >
                  <div class="flex items-center bg-gray-100">
                    <input
                      type="number"
                      id="GetWallHeightMeters"
                      value="2"
                      class="flex-grow border-0 text-sm bg-gray-100 focus:ring-0 focus:outline-none w-20"
                    />
                    <span class="pe-3">m</span>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="hidden p-0 rounded-lg"
              id="feet"
              role="tabpanel"
              aria-labelledby="feet-tab"
            >
              <div class="space-y-2">
                <div class="flex justify-between text-sm items-center">
                  <label for="GetFloorLengthFeet" class="text-sm mb-2 block"
                    >Length</label
                  >
                  <div class="flex items-center bg-gray-100">
                    <input
                      type="number"
                      id="GetFloorLengthFeet"
                      class="flex-grow border-0 text-sm bg-gray-100 focus:ring-0 focus:outline-none w-20"
                    />
                    <span class="pe-3">ft</span>
                  </div>
                </div>
                <div class="flex justify-between text-sm items-center">
                  <label for="GetFloorWidthFeet" class="text-sm mb-2 block"
                    >Width</label
                  >
                  <div class="flex items-center bg-gray-100">
                    <input
                      type="number"
                      id="GetFloorWidthFeet"
                      class="flex-grow border-0 text-sm bg-gray-100 focus:ring-0 focus:outline-none w-20"
                    />
                    <span class="pe-3">ft</span>
                  </div>
                </div>
                <div class="flex justify-between text-sm items-center">
                  <label for="GetWallHeightFeet" class="text-sm mb-2 block"
                    >Height</label
                  >
                  <div class="flex items-center bg-gray-100">
                    <input
                      type="number"
                      id="GetWallHeightFeet"
                      class="flex-grow border-0 text-sm bg-gray-100 focus:ring-0 focus:outline-none w-20"
                    />
                    <span class="pe-3">ft</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <button
            id="GenerateRoom"
            class="w-full mt-4 bg-ink text-sm text-white py-1.5 px-4 hover:bg-gray-900"
          >
            Generate Room
          </button>
        </div>
        <div class="sidebar-content space-y-3 mt-auto">
          <div class="flex justify-between items-center">
            <div>
              <label
                for="importSceneInput"
                class="bg-blue-100 text-sm text-blue-600 border-1 border-blue-500 py-1 px-3 w-fit flex items-center font-medium justify-center gap-2 hover:bg-blue-200 transition-colors cursor-pointer"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  height="22px"
                  viewBox="0 -960 960 960"
                  width="22px"
                  fill="currentColor"
                >
                  <path
                    d="m878-93.46-138-138v118.23h-40V-300h186.77v40H767.54l138 138L878-93.46ZM560-640h160L560-800v160ZM264.62-120q-27.62 0-46.12-18.5Q200-157 200-184.62v-590.76q0-27.62 18.5-46.12Q237-840 264.62-840H580l180 180v280H620v260H264.62Z"
                  />
                </svg>
                Import
              </label>
              <input
                type="file"
                id="importSceneInput"
                class="hidden"
                accept=".glb, .gltf"
              />
            </div>
            <button
              id="exportSceneBtn"
              class="bg-gray-100 text-sm text-ink py-1 font-medium px-4 border border-ink flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="22px"
                viewBox="0 -960 960 960"
                width="22px"
              >
                <path
                  d="M570-10v-60h300v60H570Zm150-124.23L574.23-280 616-321.77l74 74V-429h60v181.23l74-74L865.77-280 720-134.23ZM242.31-170q-29.54 0-50.92-21.39Q170-212.77 170-242.31v-555.38q0-29.54 21.39-50.92Q212.77-870 242.31-870H520l230 230v123.31H482.31V-170h-240ZM490-610h200L490-810v200Z"
                />
              </svg>
              Export
            </button>
          </div>
          <a href="workspaceDashboardPage.html" class="block">
            <button
              class="w-full bg-ink text-sm text-white py-1.5 px-4 hover:bg-gray-900"
            >
              Back to Home
            </button>
          </a>
        </div>
      </aside>

      <!-- Right Sidebar -->
      <aside
        class="absolute top-0 right-0 h-full z-10 w-80 bg-white p-3 flex flex-col shrink-0 border-l border-gray-200 overflow-y-auto"
      >
        <div id="inspector-container" class="hidden">
          <div class="flex items-center gap-2 mb-4">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24px"
              viewBox="0 -960 960 960"
              width="24px"
              fill="currentColor"
              class="size-6"
            >
              <path
                d="M450-290h60v-230h-60v230Zm30-298.46q13.73 0 23.02-9.29t9.29-23.02q0-13.73-9.29-23.02-9.29-9.28-23.02-9.28t-23.02 9.28q-9.29 9.29-9.29 23.02t9.29 23.02q9.29 9.29 23.02 9.29Zm.07 488.46q-78.84 0-148.21-29.92t-120.68-81.21q-51.31-51.29-81.25-120.63Q100-401.1 100-479.93q0-78.84 29.92-148.21t81.21-120.68q51.29-51.31 120.63-81.25Q401.1-860 479.93-860q78.84 0 148.21 29.92t120.68 81.21q51.31 51.29 81.25 120.63Q860-558.9 860-480.07q0 78.84-29.92 148.21t-81.21 120.68q-51.29 51.31-120.63 81.25Q558.9-100 480.07-100Zm-.07-60q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
              />
            </svg>
            <h2 class="">Inspector</h2>
          </div>
          <div class="space-y-4">
            <div
              class="flex items-center justify-between bg-gray-100 px-3 py-1.5"
            >
              <p id="inspector-object-name" class="text-sm text-ink">-</p>
            </div>
            <div class="flex justify-between items-center">
              <p class="text-sm text-ink font-medium">Lock Object</p>
              <button
                id="inspector-lock-toggle"
                title="Toggle Lock (Prevents Transformation)"
                class="text-ink/80"
              >
                <svg
                  id="icon-unlocked"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="size-5"
                >
                  <path
                    d="M18 1.5c2.9 0 5.25 2.35 5.25 5.25v3.75a.75.75 0 0 1-1.5 0V6.75a3.75 3.75 0 1 0-7.5 0v3a3 3 0 0 1 3 3v6.75a3 3 0 0 1-3 3H3.75a3 3 0 0 1-3-3v-6.75a3 3 0 0 1 3-3h9v-3c0-2.9 2.35-5.25 5.25-5.25Z"
                  />
                </svg>

                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="size-5"
                  id="icon-locked"
                >
                  <path
                    fill-rule="evenodd"
                    d="M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z"
                    clip-rule="evenodd"
                  />
                </svg>
              </button>
            </div>

            <!-- THIS WRAPPER DIV CONTAINS ALL THE TRANSFORM INPUTS -->
            <div
              id="inspector-transform-fields"
              class="space-y-3 border-t pt-3"
            >
              <div>
                <h3 class="text-sm font-medium mb-1">Position</h3>

                <div class="grid grid-cols-3 gap-2">
                  <input
                    type="number"
                    step="0.1"
                    id="inspector-pos-x"
                    class="inspector-input bg-gray-100 border-0 text-sm"
                  />
                  <input
                    type="number"
                    step="0.1"
                    id="inspector-pos-y"
                    class="inspector-input bg-gray-100 border-0 text-sm"
                  />
                  <input
                    type="number"
                    step="0.1"
                    id="inspector-pos-z"
                    class="inspector-input bg-gray-100 border-0 text-sm"
                  />
                </div>
              </div>
              <div>
                <h3 class="text-sm font-medium mb-1">Rotation (°)</h3>
                <div class="grid grid-cols-3 gap-2">
                  <input
                    type="number"
                    step="1"
                    id="inspector-rot-x"
                    class="inspector-input bg-gray-100 border-0 text-sm"
                  />
                  <input
                    type="number"
                    step="1"
                    id="inspector-rot-y"
                    class="inspector-input bg-gray-100 border-0 text-sm"
                  />
                  <input
                    type="number"
                    step="1"
                    id="inspector-rot-z"
                    class="inspector-input bg-gray-100 border-0 text-sm"
                  />
                </div>
              </div>
              <div>
                <h3 class="text-sm font-medium mb-1">Scale</h3>
                <div class="grid grid-cols-3 gap-2">
                  <input
                    type="number"
                    step="0.01"
                    id="inspector-scale-x"
                    class="inspector-input bg-gray-100 border-0 text-sm"
                  />
                  <input
                    type="number"
                    step="0.01"
                    id="inspector-scale-y"
                    class="inspector-input bg-gray-100 border-0 text-sm"
                  />
                  <input
                    type="number"
                    step="0.01"
                    id="inspector-scale-z"
                    class="inspector-input bg-gray-100 border-0 text-sm"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="model-library-container" class="">
          <!-- Lighting Dropdown -->
          <div class="border-b border-gray-200 py-2">
            <button
              id="lighting-dropdown-toggle"
              class="flex items-center justify-between w-full py-2"
            >
              <h2>Lighting</h2>
              <svg
                id="lighting-arrow-icon"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-5"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="m19.5 8.25-7.5 7.5-7.5-7.5"
                />
              </svg>
            </button>
            <div id="lighting-controls-container" class="hidden pt-2 space-y-3">
              <!-- Hemisphere Light Control Group -->
              <div class="space-y-2 p-2 border border-gray-200">
                <div class="flex justify-between items-center">
                  <span class="text-sm font-medium">Hemisphere</span>
                  <button
                    id="btn-toggle-hemisphere"
                    class="bg-gray-100 duration-200 text-xs font-medium text-gray-800 py-1 px-3 hover:bg-gray-200"
                  >
                    Toggle
                  </button>
                </div>
                <div class="flex justify-between items-center">
                  <label
                    for="hemisphere-sky-color-input"
                    class="text-xs text-gray-600"
                    title="The color of the light from above the scene."
                    >Sky Color</label
                  >
                  <input
                    type="color"
                    id="hemisphere-sky-color-input"
                    class="h-6 w-10 p-0 border-none bg-transparent cursor-pointer"
                    value="#ffffff"
                  />
                </div>
                <div class="flex justify-between items-center">
                  <label
                    for="hemisphere-ground-color-input"
                    class="text-xs text-gray-600"
                    title="The color of the light reflected from the ground."
                    >Ground Color</label
                  >
                  <input
                    type="color"
                    id="hemisphere-ground-color-input"
                    class="h-6 w-10 p-0 border-none bg-transparent cursor-pointer"
                    value="#ffffff"
                  />
                </div>
              </div>
              <!-- Directional Light Control Group -->
              <div class="space-y-2 p-2 border border-gray-200">
                <div class="flex justify-between items-center">
                  <span class="text-sm font-medium">Directional</span>
                  <button
                    id="btn-toggle-directional"
                    class="bg-gray-100 duration-200 text-xs font-medium text-gray-800 py-1 px-3 hover:bg-gray-200"
                  >
                    Toggle
                  </button>
                </div>
                <div class="flex justify-between items-center">
                  <label
                    for="directional-color-input"
                    class="text-xs text-gray-600"
                    title="The color of the main directional light source."
                    >Color</label
                  >
                  <input
                    type="color"
                    id="directional-color-input"
                    class="h-6 w-10 p-0 border-none bg-transparent cursor-pointer"
                    value="#fafafa"
                  />
                </div>
              </div>
              <!-- Reset Button -->
              <button
                id="reset-lighting-btn"
                class="w-full text-xs font-medium text-red-600 bg-red-100 hover:bg-red-200 py-1.5"
              >
                Reset Lighting
              </button>
            </div>
          </div>
          <!-- Music Dropdown -->
          <div class="border-b border-gray-200 py-2">
            <button
              id="music-dropdown-toggle"
              class="flex items-center justify-between w-full py-2"
            >
              <h2>Music</h2>
              <svg
                id="music-arrow-icon"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-5"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="m19.5 8.25-7.5 7.5-7.5-7.5"
                />
              </svg>
            </button>
            <div id="music-controls-container" class="hidden pt-2 space-y-3">
              <div class="flex items-center space-x-2">
                <select
                  id="music-select"
                  class="w-full bg-gray-100 duration-200 text-sm text-gray-800 py-2 px-2 border-gray-300 focus:ring-blue-500 focus:border-blue-500 rounded-sm"
                >
                  <option
                    value="/public/assets/Sounds/Music/Evening-Improvisation-with-Ethera(chosic.com).mp3"
                  >
                    Evening Improvisation
                  </option>
                  <option
                    value="/public/assets/Sounds/Music/Heavy_rain-500audio.mp3"
                  >
                    Heavy Rain
                  </option>
                  <option
                    value="/public/assets/Sounds/Music/Stephen_Foster_-_Beautiful_Dreamer(chosic.com).mp3"
                  >
                    Beautiful Dreamer
                  </option>
                  <option
                    value="/public/assets/Sounds/Music/Sunset-Landscape(chosic.com).mp3"
                  >
                    Sunset Landscape
                  </option>
                </select>
                <button
                  id="play-music-btn"
                  class="bg-gray-100 duration-200 rounded-full text-sm text-gray-800 p-2"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    class="size-5"
                  >
                    <path
                      d="M6.3 2.84A1.5 1.5 0 0 0 4 4.11v11.78a1.5 1.5 0 0 0 2.3 1.27l9.344-5.891a1.5 1.5 0 0 0 0-2.538L6.3 2.841Z"
                    />
                  </svg>
                </button>
                <button
                  id="pause-music-btn"
                  class="bg-red-100 duration-200 text-sm rounded-full text-red-600 p-2"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    class="size-5"
                  >
                    <path
                      d="M5.75 3a.75.75 0 0 0-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75V3.75A.75.75 0 0 0 7.25 3h-1.5ZM12.75 3a.75.75 0 0 0-.75.75v12.5c0 .414.336.75.75.75h1.5a.75.75 0 0 0 .75-.75V3.75a.75.75 0 0 0-.75-.75h-1.5Z"
                    />
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <!-- Tools Dropdown -->
          <div class="border-b border-gray-200 py-2">
            <button
              id="tools-dropdown-toggle"
              class="flex items-center justify-between w-full py-2"
            >
              <h2>Tools</h2>
              <svg
                id="tools-arrow-icon"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-5"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="m19.5 8.25-7.5 7.5-7.5-7.5"
                />
              </svg>
            </button>
            <div id="tools-controls-container" class="hidden pt-2 space-y-3">
              <div class="flex space-x-2">
                <button
                  id="btn-toggle-snap"
                  class="snap-button w-full bg-gray-100 text-gray-800 text-sm py-2 px-2"
                >
                  Snap to Grid
                </button>
                <button
                  class="w-full bg-gray-100 text-gray-800 text-sm py-2 px-2"
                >
                  <label
                    for="importModelInput"
                    class="cursor-pointer"
                    title="Add a model to the current scene"
                  >
                    <span>Import Model</span>
                  </label>
                  <input
                    type="file"
                    id="importModelInput"
                    class="hidden"
                    accept=".glb, .gltf"
                  />
                </button>
              </div>
            </div>
          </div>
          <div
            id="surface-inspector-container"
            class="hidden pb-4 mt-4 border-b border-gray-200"
          >
            <div class="flex items-center justify-between gap-2 mb-2">
              <h2 id="surface-inspector-title" class="">Surface Properties</h2>
              <button
                id="reset-surface-texture-btn"
                class="hidden text-xs font-medium text-red-600 bg-red-100 hover:bg-red-200 px-2 py-1"
              >
                Reset Textures
              </button>
            </div>
            <div class="space-y-3">
              <div>
                <div class="flex items-center gap-2">
                  <input
                    type="color"
                    id="surface-color-input"
                    class="h-8 w-16 p-0 border-none bg-gray-100 cursor-pointer"
                    value="#fafafa"
                  />
                  <input
                    type="text"
                    id="surface-color-text"
                    class="inspector-input bg-gray-100 border-0 text-sm flex-grow"
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="flex items-center justify-between mt-4 mb-2">
            <div class="flex items-center gap-1">
              <h2 id="library-title" class="">Models</h2>
            </div>
            <button
              id="back-to-categories-btn"
              class="hidden text-sm font-medium text-blue-600 hover:underline"
            >
              ← Back
            </button>
          </div>
          <p id="library-subtitle" class="text-sm text-gray-500 mb-4">
            Select a category to view models.
          </p>

          <div id="model-search-container" class="relative mb-4">
            <div
              class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"
            >
              <svg
                class="w-4 h-4 text-gray-500"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 20 20"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
                />
              </svg>
            </div>
            <input
              type="text"
              id="model-search-input"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2"
              placeholder="Search models..."
            />
          </div>
          <div id="library-content-area" class="grid grid-cols-2 gap-2"></div>
        </div>
      </aside>
      <div
        class="absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-2 p-1.5 bg-white/80 backdrop-blur-sm rounded-sm shadow-sm border border-gray-200"
      >
        <button
          id="walkview-btn"
          class="px-2 py-1 text-sm font-base text-ink/90 hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Walk View"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="currentColor"
          >
            <path
              d="M479.62-60q-92.47 0-176.97-33.31t-154.96-91.92V-100H100v-180.38h180.38v47.69H165.92q66 58 145.85 91.5t167.85 33.5q88 0 168.03-33.5 80.04-33.5 146.04-91.5H679.62v-47.69H860V-100h-48.08v-85.23q-70.84 58.61-155.34 91.92T479.62-60Zm.44-240q-125.6 0-212.83-87.17Q180-474.34 180-599.94q0-125.6 87.17-212.83Q354.34-900 479.94-900q125.6 0 212.83 87.17Q780-725.66 780-600.06q0 125.6-87.17 212.83Q605.66-300 480.06-300Zm-.06-60q100 0 170-70t70-170q0-13.32-1.58-25.43-1.57-12.11-4.73-25.03-5.38 1.15-10.96 1.73-5.58.58-10.96.58-72.08 5.69-138.19-20.54-66.12-26.23-115.04-79.23-33 54.3-84.85 91.57-51.84 37.27-113.69 51.73v1.16q-1.62 100.61 68.58 172.04Q378.77-360 480-360Zm-96.72-167.31q-15.28 0-25.82-10.41-10.54-10.42-10.54-25.81 0-15.39 10.51-25.74 10.5-10.35 26.03-10.35 15.2 0 25.49 10.42 10.28 10.41 10.28 25.81 0 15.39-10.34 25.74-10.33 10.34-25.61 10.34Zm193.19 0q-15.39 0-25.74-10.41-10.35-10.42-10.35-25.81 0-15.39 10.42-25.74 10.41-10.35 25.81-10.35 15.39 0 25.74 10.42 10.34 10.41 10.34 25.81 0 15.39-10.41 25.74-10.42 10.34-25.81 10.34Z"
            />
          </svg>
        </button>
        <button
          id="shortcuts-btn"
          class="px-2 py-1 text-sm font-base text-ink/90 hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="Shortcuts Help"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="22px"
            viewBox="0 -960 960 960"
            width="22px"
            fill="currentColor"
          >
            <path
              d="M478-240q21 0 35.5-14.5T528-290q0-21-14.5-35.5T478-340q-21 0-35.5 14.5T428-290q0 21 14.5 35.5T478-240Zm-36-154h74q0-33 7.5-52t42.5-52q26-26 41-49.5t15-56.5q0-56-41-86t-97-30q-57 0-92.5 30T342-618l66 26q5-18 22.5-39t53.5-21q32 0 48 17.5t16 38.5q0 20-12 37.5T506-526q-44 39-54 59t-10 73Zm38 314q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z"
            />
          </svg>
        </button>
        <button
          id="settings-btn"
          class="px-2 py-1 text-sm font-base text-ink/90 hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
          title="User Preferences"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="22px"
            viewBox="0 -960 960 960"
            width="22px"
            fill="currentColor"
          >
            <path
              d="m387.69-100-15.23-121.85q-16.07-5.38-32.96-15.07-16.88-9.7-30.19-20.77L196.46-210l-92.3-160 97.61-73.77q-1.38-8.92-1.96-17.92-.58-9-.58-17.93 0-8.53.58-17.34t1.96-19.27L104.16-590l92.3-159.23 112.46 47.31q14.47-11.46 30.89-20.96t32.27-15.27L387.69-860h184.62l15.23 122.23q18 6.54 32.57 15.27 14.58 8.73 29.43 20.58l114-47.31L855.84-590l-99.15 74.92q2.15 9.69 2.35 18.12.19 8.42.19 16.96 0 8.15-.39 16.58-.38 8.42-2.76 19.27L854.46-370l-92.31 160-112.61-48.08q-14.85 11.85-30.31 20.96-15.46 9.12-31.69 14.89L572.31-100H387.69Zm92.77-260q49.92 0 84.96-35.04 35.04-35.04 35.04-84.96 0-49.92-35.04-84.96Q530.38-600 480.46-600q-50.54 0-85.27 35.04T360.46-480q0 49.92 34.73 84.96Q429.92-360 480.46-360Z"
            />
          </svg>
        </button>
        <div id="zoom-controls" class="flex items-center gap-1">
          <button
            id="btn-zoom-out"
            class="p-1 text-lg font-bold text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
            title="Zoom Out"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="20px"
              viewBox="0 -960 960 960"
              width="20px"
              fill="currentColor"
            >
              <path d="M200-440v-80h560v80H200Z" />
            </svg>
          </button>
          <div
            id="zoom-percentage"
            class="text-sm font-base text-ink w-10 text-center"
          >
            100%
          </div>
          <button
            id="btn-zoom-in"
            class="p-1 text-lg font-bold text-ink hover:bg-blue-100 hover:text-blue-500 rounded-sm transition-colors"
            title="Zoom In"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="18px"
              viewBox="0 -960 960 960"
              width="18px"
              fill="currentColor"
            >
              <path
                d="M440-120v-320H120v-80h320v-320h80v320h320v80H520v320h-80Z"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>
    <div
      id="walk-view-modal"
      class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50"
    >
      <div class="bg-white rounded-sm shadow-xl p-5 w-full max-w-sm">
        <h3 class="text-lg font-medium text-ink mb-2">Walk View Controls</h3>
        <p class="text-sm text-ink/80 mb-4">
          You are now in Walk View. Use your keyboard to move around the scene:
        </p>
        <ul class="text-sm space-y-1 list-disc list-inside text-ink/80 mb-6">
          <li>
            <span class="font-medium">W / S:</span> Move Forward / Backward
          </li>
          <li><span class="font-medium">A / D:</span> Move Left / Right</li>
          <li><span class="font-medium">Q / E:</span> Move Up / Down</li>
        </ul>
        <button
          id="close-walk-modal-btn"
          class="w-full text-sm bg-blue-500 hover:bg-blue-600 duration-200 font-medium text-white py-1.5 flex items-center justify-center gap-2"
        >
          Got It
        </button>
      </div>
    </div>
    <div
      id="shortcuts-modal"
      class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50"
    >
      <div class="bg-white rounded-sm shadow-xl p-5 w-full max-w-sm">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-medium text-ink">Keyboard Shortcuts</h3>
        </div>
        <div class="grid grid-cols-2 gap-x-6 gap-y-3 text-sm">
          <div class="flex justify-between border-b border-b-ink/60 pb-3">
            <span class="text-ink/80">Focus Object</span
            ><kbd class="font-mono font-medium text-ink/80">F</kbd>
          </div>
          <div class="flex justify-between border-b border-b-ink/60 pb-3">
            <span class="text-ink/80">Deselect</span
            ><kbd class="font-mono font-medium text-ink/80">Esc</kbd>
          </div>
          <div class="flex justify-between border-b border-b-ink/60 pb-3">
            <span class="text-ink/80">Switch Controls</span
            ><kbd class="font-mono font-medium text-ink/80">R</kbd>
          </div>
          <div class="flex justify-between border-b border-b-ink/60 pb-3">
            <span class="text-ink/80">Delete Object</span
            ><kbd class="font-mono font-medium text-ink/80">Delete</kbd>
          </div>
          <div class="flex justify-between border-b border-b-ink/60 pb-3">
            <span class="text-ink/80">Move Camera</span
            ><kbd class="font-mono font-medium text-ink/80">W/A/S/D</kbd>
          </div>
          <div class="flex justify-between border-b border-b-ink/60 pb-3">
            <span class="text-ink/80">Move Up/Down</span
            ><kbd class="font-mono font-medium text-ink/80">Q/E</kbd>
          </div>
          <div class="flex justify-between border-b border-b-ink/60 pb-3">
            <span class="text-ink/80">Undo</span
            ><kbd class="font-mono font-medium text-ink/80">Ctrl + Z</kbd>
          </div>
          <div class="flex justify-between border-b border-b-ink/60 pb-3">
            <span class="text-ink/80">Redo</span
            ><kbd class="font-mono font-medium text-ink/80">Ctrl + Y</kbd>
          </div>
        </div>
        <button
          id="close-shortcuts-modal-btn"
          class="w-full mt-4 text-sm bg-blue-500 hover:bg-blue-600 duration-200 font-medium text-white py-1.5 flex items-center justify-center gap-2"
        >
          Got It
        </button>
      </div>
    </div>
    <div
      id="settings-modal"
      class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50"
    >
      <div class="bg-white rounded-sm shadow-xl p-5 w-full max-w-sm">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-medium text-ink">Preferences</h3>
        </div>
        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <span class="text-sm text-ink/80">Drag & Drop Sound Effect</span>
            <label
              for="toggle-sound-effects"
              class="inline-flex items-center cursor-pointer"
            >
              <input
                type="checkbox"
                id="toggle-sound-effects"
                class="sr-only peer"
              />
              <div
                class="relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"
              ></div>
            </label>
          </div>
        </div>
        <button
          id="close-settings-modal-btn"
          class="w-full mt-4 text-sm bg-blue-500 hover:bg-blue-600 duration-200 font-medium text-white py-1.5 flex items-center justify-center gap-2"
        >
          Got It
        </button>
      </div>
    </div>

    <!-- Confirmation Modal -->
    <div
      id="confirm-action-modal"
      class="hidden fixed inset-0 z-50 overflow-y-auto"
      aria-labelledby="modal-title"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="flex items-center bg-black/50 justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"
      >
        <span
          class="hidden sm:inline-block sm:align-middle sm:h-screen"
          aria-hidden="true"
          >​</span
        >
        <div
          class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
        >
          <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
              <div
                class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"
              >
                <svg
                  class="h-6 w-6 text-red-600"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  aria-hidden="true"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  />
                </svg>
              </div>
              <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                <h3
                  class="text-lg leading-6 font-medium text-gray-900"
                  id="confirm-modal-title"
                >
                  Action Confirmation
                </h3>
                <div class="mt-2">
                  <p class="text-sm text-gray-500" id="confirm-modal-message">
                    Are you sure you want to proceed?
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
            <button
              type="button"
              id="confirm-action-btn"
              class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white cursor-pointer hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"
            >
              Confirm
            </button>
            <button
              type="button"
              id="cancel-action-btn"
              class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
    <div
      id="model-limit-modal"
      class="hidden fixed inset-0 z-50 overflow-y-auto"
      aria-labelledby="modal-title"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="flex items-center bg-black/50 justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"
      >
        <span
          class="hidden sm:inline-block sm:align-middle sm:h-screen"
          aria-hidden="true"
          >​</span
        >
        <div
          class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
        >
          <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
              <div
                class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-amber-100 sm:mx-0 sm:h-10 sm:w-10"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="size-6 text-amber-500"
                >
                  <path
                    fill-rule="evenodd"
                    d="M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z"
                    clip-rule="evenodd"
                  />
                </svg>
              </div>
              <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                <h3
                  class="text-lg leading-6 font-medium text-gray-900"
                  id="modal-title"
                >
                  Model Limit Reached
                </h3>
                <div class="mt-2">
                  <p class="text-sm text-gray-500">
                    Your current plan allows up to 10 models in a scene. To add
                    unlimited models and unlock all features, please upgrade to
                    Pro.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
            <a
              href="pricingPage.html"
              class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-amber-500 text-base font-medium text-white cursor-pointer hover:bg-amber-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 sm:ml-3 sm:w-auto sm:text-sm"
            >
              Go Pro
            </a>
            <button
              type="button"
              id="cancel-model-limit-btn"
              class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm"
            >
              Got It
            </button>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="./js/main.js"></script>
  </body>
</html>
